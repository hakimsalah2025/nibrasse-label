# ๐๏ธ ุฏููู ุฅูุฑุงุบ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ูุธุฑุฉ ุนุงูุฉ

ุชุทุจูู NIBRASSE ูุฎุฒู ุงูุจูุงูุงุช ูู 3 ุฃูุงูู:

1. **ChromaDB** - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุชุฌูุฉ (Vector Store)
   - ุงููุณุงุฑ: `backend/data/chroma_db/`
   - ูุญุชูู ุนูู: Embeddings (ุงููุชุฌูุงุช) ูููุตูุต

2. **BM25 Index** - ููุฑุณ ุงูุจุญุซ ุงููููุงุช ุงูููุชุงุญูุฉ
   - ุงูููู: `backend/data/bm25_index.pkl`
   - ูุญุชูู ุนูู: ููุฑุณ ุงูุจุญุซ ุงููุตู

3. **Supabase** - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ (PostgreSQL)
   - ุงูุฌุฏุงูู: `documents`, `chunk`
   - ูุญุชูู ุนูู: ุงูุจูุงูุงุช ุงููุตููุฉ ูุงููุตูุต ุงูุฃุตููุฉ

---

## โก ุทุฑู ุฅูุฑุงุบ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ๐ฏ ุงูุทุฑููุฉ 1: ุฅูุฑุงุบ ูุงูู (ููุตู ุจู)

**ุจุงุณุชุฎุฏุงู ููู .bat:**
```
ููุฑุฉ ูุฒุฏูุฌุฉ ุนูู: clear_database.bat
```

**ุฃู ูู ุณุทุฑ ุงูุฃูุงูุฑ:**
```cmd
cd backend
python clear_database.py
```

**ูุง ุณูุญุฏุซ:**
- โ ุณูุทูุจ ููู ุงูุชุฃููุฏ (ุงูุชุจ `ูุนู` ุฃู `yes`)
- ๐๏ธ ููุณุญ ChromaDB ุจุงููุงูู
- ๐๏ธ ููุณุญ BM25 Index
- ๐๏ธ ููุณุญ ุฌุฏุงูู Supabase (documents + chunks)

---

### ๐ง ุงูุทุฑููุฉ 2: ูุณุญ ุฌุฒุฆู

ููููู ูุณุญ ุฌุฒุก ูุงุญุฏ ููุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

#### ูุณุญ ChromaDB ููุท:
```cmd
cd backend
python clear_database.py chroma
```

#### ูุณุญ BM25 Index ููุท:
```cmd
cd backend
python clear_database.py bm25
```

#### ูุณุญ Supabase ููุท:
```cmd
cd backend
python clear_database.py supabase
```

---

### ๐๏ธ ุงูุทุฑููุฉ 3: ูุฏููุงู

#### 1. ูุณุญ ChromaDB ูุฏููุงู:
```cmd
# ุงุญุฐู ุงููุฌูุฏ ุจุงููุงูู
rmdir /s /q backend\data\chroma_db
```

#### 2. ูุณุญ BM25 Index ูุฏููุงู:
```cmd
# ุงุญุฐู ุงูููู
del backend\data\bm25_index.pkl
```

#### 3. ูุณุญ Supabase ูุฏููุงู:
```sql
-- ูู Supabase Dashboard > SQL Editor
DELETE FROM chunk;
DELETE FROM documents;
```

---

## ๐ ุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุจุนุฏ ุฅูุฑุงุบ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุฏูู ุฎูุงุฑุงุช:

### ุงูุฎูุงุฑ 1: ุฑูุน ูุณุชูุฏุงุช ุฌุฏูุฏุฉ ูู ุงููุงุฌูุฉ
1. ุงูุชุญ ุงูุชุทุจูู: http://localhost:8000
2. ุงูุชูู ุฅูู "Bibliothรจque / ุงูููุชุจุฉ"
3. ุงุฑูุน ุงููููุงุช ุงููุทููุจุฉ

### ุงูุฎูุงุฑ 2: ุฅุนุงุฏุฉ ุจูุงุก ูู ุงููููุงุช ุงูููุฌูุฏุฉ
```cmd
cd backend
python rebuild_database.py
```
**ููุงุญุธุฉ:** ูุฐุง ุณูุนูุฏ ูุนุงูุฌุฉ ุฌููุน ูููุงุช `.txt` ูู `backend/data/`

---

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

### ูุจู ุงููุณุญ:
โ๏ธ **ุงููุณุฎ ุงูุงุญุชูุงุทู:** ุฅุฐุง ูุงูุช ูุฏูู ุจูุงูุงุช ูููุฉุ ุงูุณุฎ:
- ูุฌูุฏ `backend/data/chroma_db/`
- ููู `backend/data/bm25_index.pkl`
- ุตุฏูุฑ ุจูุงูุงุช Supabase ูู Dashboard

โ๏ธ **ูุง ุฑุฌุนุฉ:** ุจุนุฏ ุงููุณุญุ ูุง ูููู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช!

โ๏ธ **ุฃููู ุงูุชุทุจูู:** ุชุฃูุฏ ูู ุฅููุงู ุงูุชุทุจูู ูุจู ุงููุณุญ:
```cmd
stop_app.bat
```

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูุดุงุฆุนุฉ

### ุญุงูุฉ 1: ุจุฏุก ูู ุงูุตูุฑ
```cmd
# 1. ุฃููู ุงูุชุทุจูู
stop_app.bat

# 2. ุงูุณุญ ูู ุดูุก
clear_database.bat
# (ุงูุชุจ: ูุนู)

# 3. ุดุบูู ุงูุชุทุจูู
start_app.bat

# 4. ุงุฑูุน ุงููุณุชูุฏุงุช ุงูุฌุฏูุฏุฉ ูู ุงููุงุฌูุฉ
```

### ุญุงูุฉ 2: ูุดููุฉ ูู ุงูุจุญุซ (ููุท BM25)
```cmd
cd backend
python clear_database.py bm25
```

### ุญุงูุฉ 3: ูุดููุฉ ูู Embeddings (ููุท ChromaDB)
```cmd
cd backend
python clear_database.py chroma
```

### ุญุงูุฉ 4: ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ
```cmd
# 1. ุงูุณุญ
clear_database.bat

# 2. ุฃุนุฏ ุงูุจูุงุก ูู ุงููููุงุช
cd backend
python rebuild_database.py
```

---

## ๐ ุงูุชุญูู ูู ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุชุญูู ูู ChromaDB:
```cmd
# ุฅุฐุง ูุงู ุงููุฌูุฏ ููุฌูุฏ
dir backend\data\chroma_db
```

### ุงูุชุญูู ูู BM25:
```cmd
# ุฅุฐุง ูุงู ุงูููู ููุฌูุฏ
dir backend\data\bm25_index.pkl
```

### ุงูุชุญูู ูู Supabase:
1. ุงูุชุญ Supabase Dashboard
2. Table Editor > documents
3. ุดุงูุฏ ุนุฏุฏ ุงูุณุฌูุงุช

---

## ๐ ููุงุฑูุฉ ุงูุทุฑู

| ุงูุทุฑููุฉ | ุงูุณูููุฉ | ุงูุฃูุงู | ูุชู ุชุณุชุฎุฏููุง |
|---------|---------|--------|---------------|
| **clear_database.bat** | โญโญโญโญโญ | โ (ูุทูุจ ุชุฃููุฏ) | ุงูุจุฏุก ูู ุงูุตูุฑ |
| **clear_database.py chroma** | โญโญโญโญ | โ๏ธ (ุจุฏูู ุชุฃููุฏ) | ูุดููุฉ ูู Embeddings |
| **ูุฏููุงู** | โญโญ | โ๏ธ (ุฎุทุฑ ุงูุญุฐู ุงูุฎุงุทุฆ) | ูููุชูุฏููู ููุท |
| **rebuild_database.py** | โญโญโญ | โ | ุฅุนุงุฏุฉ ุจูุงุก ูุงููุฉ |

---

## ๐ก ูุตุงุฆุญ

โจ **ููุชุทููุฑ:** ุงุณุชุฎุฏู `clear_database.py` ูุจู ูู ุงุฎุชุจุงุฑ ูุจูุฑ  
โจ **ููุฅูุชุงุฌ:** ุงุญุฐุฑ ูู ุงููุณุญุ ุฏุงุฆูุงู ุงุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ  
โจ **ููุฃุฏุงุก:** ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจูุฑุฉุ ูุณุญูุง ุฃุณุฑุน ูู ุฅุนุงุฏุฉ ุจูุงุกูุง  
โจ **ููุชูุธูู:** ุงูุณุญ ุงูุจูุงูุงุช ุงููุฏููุฉ ุจุดูู ุฏูุฑู  

---

## ๐ ุญู ุงููุดุงูู

### ูุดููุฉ: "Permission denied" ุนูุฏ ุงููุณุญ
**ุงูุญู:**
1. ุฃููู ุงูุชุทุจูู ูู `stop_app.bat`
2. ุฃุบูู ุฌููุน ุจุฑุงูุฌ ุงูุชุญุฑูุฑ
3. ุญุงูู ูุฑุฉ ุฃุฎุฑู

### ูุดููุฉ: "Supabase connection error"
**ุงูุญู:**
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุชุญูู ูู ููู `.env` - ุงูููุงุชูุญ ุตุญูุญุฉุ
3. ุชุญูู ูู Supabase Dashboard - ูู ุงูุฌุฏุงูู ููุฌูุฏุฉุ

### ูุดููุฉ: ChromaDB ูู ูููุณุญ ุจุงููุงูู
**ุงูุญู:**
```cmd
# ุงุณุชุฎุฏู ุงูุญุฐู ุงูููู
rmdir /s /q backend\data\chroma_db
```

---

**ุชู ุฅูุดุงุก ุงููุซููุฉ ุจูุงุณุทุฉ:** Antigravity AI  
**ุงูุชุงุฑูุฎ:** 26 ููููุจุฑ 2025
